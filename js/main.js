var dataString = '[{"x":2.865540,"y":-0.129333,"z":-0.236664},{"x":2.357605,"y":-0.384201,"z":-0.277557},{"x":1.660660,"y":-0.270035,"z":-0.379013},{"x":1.353165,"y":0.057419,"z":-0.307877},{"x":1.244370,"y":0.097443,"z":-0.105011},{"x":1.183014,"y":0.263336,"z":0.056610},{"x":1.083420,"y":0.409241,"z":0.072540},{"x":0.989075,"y":0.615723,"z":0.063324},{"x":0.868927,"y":0.766556,"z":0.150040},{"x":0.760605,"y":0.906906,"z":0.111526},{"x":0.575043,"y":1.031677,"z":0.103424},{"x":0.399765,"y":0.997467,"z":0.184158},{"x":0.496780,"y":0.964676,"z":0.070129},{"x":0.733292,"y":0.841751,"z":0.065720},{"x":0.663223,"y":0.915588,"z":0.173233},{"x":0.720566,"y":0.805405,"z":0.130753},{"x":0.790787,"y":0.605011,"z":0.137360},{"x":0.817780,"y":0.550629,"z":0.201920},{"x":0.903793,"y":0.527878,"z":0.195236},{"x":0.884232,"y":0.553711,"z":0.243988},{"x":0.966385,"y":0.520355,"z":0.185043},{"x":0.959854,"y":0.443588,"z":0.163239},{"x":0.864151,"y":0.518631,"z":0.228729},{"x":0.869614,"y":0.642914,"z":0.278503},{"x":1.010284,"y":0.651642,"z":0.239807},{"x":1.172012,"y":0.656525,"z":0.192352},{"x":1.338928,"y":0.652908,"z":0.179047},{"x":1.235748,"y":0.501053,"z":0.135834},{"x":1.069016,"y":0.400009,"z":0.148621},{"x":1.066086,"y":0.498993,"z":0.216568},{"x":1.121857,"y":0.621628,"z":0.213181},{"x":1.186508,"y":0.703842,"z":0.162857},{"x":1.149734,"y":0.794586,"z":0.055069},{"x":1.126358,"y":0.857742,"z":0.016800},{"x":1.117905,"y":0.908081,"z":0.066284},{"x":1.047256,"y":0.975281,"z":0.183716},{"x":0.962173,"y":1.010605,"z":0.139557},{"x":0.867554,"y":0.955490,"z":0.042328},{"x":0.772110,"y":0.904266,"z":0.024811},{"x":0.646179,"y":0.934494,"z":0.088699},{"x":0.538239,"y":0.878799,"z":0.116943},{"x":0.451202,"y":0.834229,"z":0.096512},{"x":0.458328,"y":0.933731,"z":0.194855},{"x":0.542328,"y":0.936844,"z":0.230103},{"x":0.589554,"y":0.848541,"z":0.164062},{"x":0.601974,"y":0.706650,"z":0.069107},{"x":0.729111,"y":0.722931,"z":0.093719},{"x":0.889450,"y":0.723267,"z":0.137085},{"x":0.939392,"y":0.647385,"z":0.147903},{"x":0.914047,"y":0.569199,"z":0.135620},{"x":0.856033,"y":0.625244,"z":0.094986},{"x":0.941956,"y":0.625031,"z":0.061539},{"x":1.054901,"y":0.584610,"z":0.082779},{"x":1.086868,"y":0.573502,"z":0.099991},{"x":1.140457,"y":0.521820,"z":0.074432},{"x":1.154953,"y":0.439560,"z":0.096786},{"x":1.121033,"y":0.456757,"z":0.101669},{"x":1.202240,"y":0.481323,"z":0.106308},{"x":1.244705,"y":0.449326,"z":0.154083},{"x":1.228729,"y":0.439590,"z":0.100647},{"x":1.244614,"y":0.455917,"z":0.083435},{"x":1.336105,"y":0.411957,"z":0.173126},{"x":1.352341,"y":0.482590,"z":0.192001},{"x":1.230545,"y":0.622070,"z":0.073532},{"x":1.093796,"y":0.678116,"z":-0.006622},{"x":0.978485,"y":0.654099,"z":-0.005692},{"x":0.925949,"y":0.658386,"z":-0.015839},{"x":0.892975,"y":0.749237,"z":0.008575},{"x":0.869171,"y":0.836182,"z":0.071945},{"x":0.859772,"y":0.851990,"z":0.076004},{"x":0.841873,"y":0.802780,"z":0.042435},{"x":0.785339,"y":0.771927,"z":0.011795},{"x":0.672394,"y":0.744141,"z":-0.028976},{"x":0.577652,"y":0.706909,"z":-0.089951},{"x":0.542694,"y":0.592117,"z":-0.093506},{"x":0.605591,"y":0.634933,"z":-0.031082},{"x":0.778885,"y":0.755966,"z":0.084747},{"x":0.796982,"y":0.543198,"z":0.144577},{"x":0.814987,"y":0.237473,"z":0.011276},{"x":0.925964,"y":0.300827,"z":0.052719},{"x":0.964081,"y":0.316757,"z":0.167816},{"x":0.987732,"y":0.299789,"z":0.101410},{"x":0.975677,"y":0.299393,"z":0.060898},{"x":0.927841,"y":0.350159,"z":0.077530},{"x":0.900360,"y":0.432190,"z":0.073959},{"x":0.883163,"y":0.516327,"z":0.053177},{"x":0.820801,"y":0.576492,"z":0.073532},{"x":0.791031,"y":0.591812,"z":0.009613},{"x":0.772125,"y":0.658432,"z":0.027786},{"x":0.868713,"y":0.737915,"z":0.177658},{"x":0.697113,"y":0.747986,"z":0.374817},{"x":0.630539,"y":0.851044,"z":0.341248},{"x":0.807831,"y":0.868164,"z":0.068253},{"x":0.831726,"y":0.872498,"z":-0.061401},{"x":0.760086,"y":0.723587,"z":-0.044434},{"x":0.709961,"y":0.641708,"z":0.005951},{"x":0.660431,"y":0.660294,"z":-0.037308},{"x":0.696564,"y":0.697037,"z":-0.125748},{"x":0.739822,"y":0.631622,"z":-0.170670},{"x":0.730408,"y":0.598694,"z":-0.158005},{"x":0.768875,"y":0.944519,"z":-0.235260},{"x":0.299347,"y":1.127014,"z":0.176285},{"x":0.094284,"y":1.077835,"z":0.142273},{"x":0.381454,"y":0.900772,"z":-0.271606},{"x":0.586960,"y":0.811722,"z":-0.053665},{"x":0.720245,"y":0.776611,"z":0.149872},{"x":0.924011,"y":0.796219,"z":0.018173},{"x":0.913696,"y":0.882996,"z":-0.133240},{"x":0.756424,"y":0.812424,"z":-0.043304},{"x":0.896866,"y":0.547485,"z":0.036514},{"x":0.875824,"y":0.591599,"z":0.062790},{"x":0.820084,"y":0.747498,"z":-0.113388},{"x":0.519531,"y":0.912704,"z":-0.083603},{"x":0.274902,"y":1.119919,"z":-0.035126},{"x":0.113297,"y":1.226013,"z":0.037720},{"x":0.292038,"y":1.123962,"z":0.124084},{"x":0.599594,"y":0.831223,"z":0.194809},{"x":0.582199,"y":0.694809,"z":0.236420},{"x":0.597000,"y":0.690155,"z":0.184540},{"x":0.675903,"y":0.664856,"z":0.140656},{"x":0.787231,"y":0.603882,"z":0.126770},{"x":0.914154,"y":0.432999,"z":0.103592},{"x":0.933487,"y":0.451721,"z":0.108902},{"x":1.033127,"y":0.443756,"z":0.078979},{"x":1.247513,"y":0.388443,"z":0.140228},{"x":1.343048,"y":0.462738,"z":0.124115},{"x":1.412292,"y":0.469208,"z":-0.095032},{"x":1.441788,"y":0.505310,"z":-0.119934},{"x":1.448883,"y":0.634857,"z":-0.068832},{"x":1.363205,"y":0.694916,"z":-0.157715},{"x":1.321136,"y":0.994934,"z":-0.089233},{"x":1.339355,"y":1.103577,"z":-0.132355},{"x":1.143036,"y":1.103836,"z":-0.052124},{"x":0.871506,"y":1.024292,"z":-0.051300},{"x":0.778137,"y":0.901062,"z":-0.081421},{"x":0.704330,"y":0.794617,"z":-0.081635},{"x":0.612976,"y":0.752579,"z":-0.009293},{"x":0.633759,"y":0.669006,"z":0.000977},{"x":0.548157,"y":0.620590,"z":-0.003616},{"x":0.439850,"y":0.649002,"z":0.020966},{"x":0.446503,"y":0.694733,"z":0.064804},{"x":0.468430,"y":0.697723,"z":0.117615},{"x":0.622192,"y":0.793533,"z":0.124954},{"x":0.875275,"y":0.879776,"z":0.123138},{"x":0.959229,"y":0.842514,"z":0.159836},{"x":1.034500,"y":0.725922,"z":0.048477},{"x":1.108978,"y":0.700836,"z":-0.030899},{"x":1.187317,"y":0.714249,"z":0.061600},{"x":1.209579,"y":0.642609,"z":0.124023},{"x":1.145782,"y":0.529449,"z":0.101746},{"x":1.093872,"y":0.494019,"z":0.109421},{"x":1.091064,"y":0.462753,"z":0.098694},{"x":1.077103,"y":0.461899,"z":0.084579},{"x":1.134308,"y":0.445877,"z":0.074997},{"x":1.125397,"y":0.375595,"z":0.071838},{"x":1.112534,"y":0.289429,"z":0.066742},{"x":1.119949,"y":0.252319,"z":0.062119},{"x":1.206192,"y":0.271805,"z":0.070297},{"x":1.335129,"y":0.306580,"z":0.101776},{"x":1.404678,"y":0.452499,"z":0.119400},{"x":1.392670,"y":0.445816,"z":0.089996},{"x":1.311096,"y":0.424072,"z":0.056000},{"x":1.222214,"y":0.566910,"z":0.029388},{"x":1.225388,"y":0.772690,"z":0.005753},{"x":1.249664,"y":0.866074,"z":0.010117},{"x":1.145462,"y":0.868271,"z":-0.018356},{"x":1.082825,"y":0.900620,"z":-0.029800},{"x":1.037048,"y":0.865768,"z":0.004257},{"x":0.963654,"y":0.813553,"z":-0.001465},{"x":0.893997,"y":0.866058,"z":-0.033218},{"x":0.767334,"y":0.836655,"z":-0.011963},{"x":0.656860,"y":0.761932,"z":0.019608},{"x":0.565857,"y":0.761703,"z":0.013290},{"x":0.525238,"y":0.739838,"z":-0.026993},{"x":0.522247,"y":0.775055,"z":0.001465},{"x":0.629807,"y":0.904434,"z":0.029266},{"x":0.698410,"y":0.853378,"z":0.020187},{"x":0.684509,"y":0.759125,"z":0.046494},{"x":0.719620,"y":0.706833,"z":0.030472},{"x":0.873367,"y":0.672180,"z":0.097168},{"x":0.979385,"y":0.637741,"z":0.148361},{"x":1.001511,"y":0.599274,"z":0.098129},{"x":1.077835,"y":0.555740,"z":0.094986},{"x":1.099030,"y":0.489243,"z":0.216553},{"x":1.081558,"y":0.490494,"z":0.094452},{"x":1.095917,"y":0.462082,"z":-0.035416},{"x":1.096298,"y":0.371704,"z":-0.020126},{"x":1.145081,"y":0.329285,"z":0.019409},{"x":1.160629,"y":0.313553,"z":0.016083},{"x":1.141083,"y":0.362305,"z":0.017654},{"x":1.153290,"y":0.397049,"z":0.004791},{"x":1.058365,"y":0.437836,"z":0.027512},{"x":1.054886,"y":0.613998,"z":0.029495},{"x":1.092072,"y":0.694351,"z":0.008041},{"x":1.011795,"y":0.573303,"z":-0.056961},{"x":0.834183,"y":0.655334,"z":-0.084167},{"x":0.738266,"y":0.796341,"z":-0.021118},{"x":0.654419,"y":0.938339,"z":0.068634},{"x":0.472748,"y":1.056198,"z":0.181778},{"x":0.365845,"y":1.075302,"z":0.182587},{"x":0.369415,"y":1.022842,"z":0.071381},{"x":0.395920,"y":0.984879,"z":0.026825},{"x":0.474625,"y":0.924438,"z":0.036163},{"x":0.495728,"y":0.861679,"z":0.106155},{"x":0.594208,"y":0.848694,"z":0.009811},{"x":0.632965,"y":0.856461,"z":-0.042618},{"x":0.669037,"y":0.846298,"z":-0.093277},{"x":0.735718,"y":0.793396,"z":-0.102005},{"x":0.670151,"y":0.767899,"z":-0.178055},{"x":0.639084,"y":0.760712,"z":-0.240860},{"x":0.712326,"y":0.762650,"z":-0.251648},{"x":0.802368,"y":0.822021,"z":-0.208282},{"x":0.812653,"y":0.813782,"z":-0.139053},{"x":0.780701,"y":0.682266,"z":-0.027344},{"x":0.700500,"y":0.663681,"z":0.002457},{"x":0.667282,"y":0.676025,"z":-0.079193},{"x":0.708282,"y":0.572708,"z":-0.101395},{"x":0.761078,"y":0.541748,"z":-0.005844},{"x":0.839203,"y":0.643784,"z":-0.030334},{"x":0.828751,"y":0.695236,"z":-0.123505},{"x":0.827942,"y":0.586761,"z":-0.094955},{"x":0.783127,"y":0.532013,"z":-0.073257},{"x":0.791367,"y":0.563324,"z":-0.114258},{"x":0.650970,"y":0.580597,"z":-0.066635},{"x":0.614365,"y":0.637634,"z":-0.174271},{"x":0.719116,"y":0.706024,"z":-0.046082},{"x":0.888748,"y":0.821472,"z":0.000671},{"x":0.951050,"y":0.688141,"z":-0.150177},{"x":0.842865,"y":0.586075,"z":-0.099350},{"x":0.708313,"y":0.582077,"z":0.077011},{"x":0.692032,"y":0.551453,"z":0.126999},{"x":0.769104,"y":0.590637,"z":0.048203},{"x":0.984406,"y":0.531998,"z":0.118103},{"x":1.016373,"y":0.472458,"z":0.143448},{"x":0.930588,"y":0.446213,"z":0.113205},{"x":0.922852,"y":0.457840,"z":0.094971},{"x":0.879028,"y":0.605042,"z":0.261246},{"x":0.829773,"y":0.569366,"z":0.145584},{"x":0.961914,"y":0.519760,"z":0.023254},{"x":1.065567,"y":0.537979,"z":0.197617},{"x":1.176712,"y":0.308578,"z":0.010437},{"x":1.372742,"y":0.118866,"z":0.087463},{"x":1.307907,"y":0.143448,"z":0.226822},{"x":1.503967,"y":0.215500,"z":0.000290},{"x":1.474304,"y":0.425827,"z":0.061813},{"x":1.392014,"y":0.528076,"z":0.088684},{"x":1.344315,"y":0.592712,"z":0.066101},{"x":1.198975,"y":0.684967,"z":0.012390},{"x":1.110657,"y":0.709869,"z":-0.033539},{"x":1.044800,"y":0.722702,"z":0.007156},{"x":0.925537,"y":0.806534,"z":-0.011551},{"x":0.652863,"y":0.794342,"z":0.003693},{"x":0.284988,"y":0.683807,"z":0.044083},{"x":0.143570,"y":0.781372,"z":0.179688},{"x":0.200836,"y":0.846100,"z":0.271927},{"x":0.390121,"y":0.774872,"z":0.157211},{"x":0.572922,"y":0.643860,"z":0.034058},{"x":0.694305,"y":0.653091,"z":-0.016983},{"x":0.827240,"y":0.691986,"z":-0.020035},{"x":0.982544,"y":0.663910,"z":0.015686},{"x":1.087570,"y":0.663040,"z":0.042694},{"x":1.268890,"y":0.575714,"z":0.091431},{"x":1.374298,"y":0.513092,"z":0.082748},{"x":1.305847,"y":0.504440,"z":0.046310},{"x":1.312820,"y":0.589661,"z":0.075653},{"x":1.355286,"y":0.536743,"z":0.244431},{"x":1.345764,"y":0.543152,"z":0.244293},{"x":1.342102,"y":0.442245,"z":0.163605},{"x":1.308731,"y":0.234848,"z":0.158676},{"x":1.372543,"y":0.003586,"z":0.092712},{"x":1.340988,"y":0.072998,"z":0.035873},{"x":1.275513,"y":0.235046,"z":0.014496},{"x":1.302567,"y":0.430511,"z":0.043396},{"x":1.351044,"y":0.558334,"z":-0.003220},{"x":1.335846,"y":0.646149,"z":-0.066864},{"x":1.299133,"y":0.741211,"z":-0.077057},{"x":1.259094,"y":0.857071,"z":-0.058411},{"x":1.157639,"y":0.953659,"z":0.001190},{"x":1.013855,"y":0.954285,"z":0.006699},{"x":0.915207,"y":0.895676,"z":-0.013245},{"x":0.782104,"y":0.902771,"z":0.009232},{"x":0.594040,"y":0.895447,"z":0.067352},{"x":0.535049,"y":0.887131,"z":0.101624},{"x":0.483047,"y":0.901428,"z":0.149811},{"x":0.573181,"y":0.914429,"z":0.117401},{"x":0.606644,"y":0.755554,"z":-0.006012},{"x":0.639374,"y":0.639191,"z":0.001984},{"x":0.749252,"y":0.611969,"z":0.106613},{"x":0.811508,"y":0.611893,"z":0.149734},{"x":0.786530,"y":0.617310,"z":0.146484},{"x":0.791367,"y":0.619614,"z":0.065491},{"x":0.871445,"y":0.608505,"z":0.007111},{"x":1.059891,"y":0.564453,"z":0.020782},{"x":1.174438,"y":0.537354,"z":0.126495},{"x":1.230789,"y":0.440964,"z":0.135254},{"x":1.215500,"y":0.413254,"z":0.077011},{"x":1.166138,"y":0.440811,"z":0.027313},{"x":1.241394,"y":0.544724,"z":0.074600},{"x":1.282150,"y":0.546799,"z":0.143204},{"x":1.307358,"y":0.557343,"z":0.130859},{"x":1.252258,"y":0.477097,"z":0.044022},{"x":1.188278,"y":0.346695,"z":0.019363},{"x":1.110840,"y":0.280106,"z":0.040131},{"x":1.082336,"y":0.333008,"z":0.053329},{"x":1.123230,"y":0.385483,"z":0.048630},{"x":1.138962,"y":0.440903,"z":0.013397},{"x":1.131729,"y":0.479813,"z":-0.029449},{"x":1.107132,"y":0.541397,"z":-0.027481},{"x":1.057983,"y":0.653809,"z":-0.020523},{"x":0.997574,"y":0.760147,"z":-0.077927},{"x":0.931595,"y":0.819427,"z":-0.080734},{"x":0.843567,"y":0.817825,"z":-0.052689},{"x":0.738098,"y":0.809784,"z":-0.033752},{"x":0.659180,"y":0.825684,"z":-0.059814},{"x":0.555130,"y":0.752914,"z":-0.091766},{"x":0.590179,"y":0.752594,"z":-0.008072},{"x":0.712997,"y":0.824417,"z":0.037216},{"x":0.860168,"y":0.766006,"z":-0.048065},{"x":0.822647,"y":0.359482,"z":-0.090027},{"x":0.884476,"y":0.308472,"z":-0.015366},{"x":0.939240,"y":0.360794,"z":0.051865},{"x":0.959335,"y":0.324982,"z":0.040802},{"x":0.949554,"y":0.281250,"z":0.015579},{"x":0.901184,"y":0.303009,"z":0.012466},{"x":0.883484,"y":0.357803,"z":0.008743},{"x":0.888809,"y":0.444443,"z":-0.002014},{"x":0.868469,"y":0.513794,"z":0.003510},{"x":0.857590,"y":0.599350,"z":-0.015030},{"x":0.865875,"y":0.639664,"z":-0.012589},{"x":0.882950,"y":0.659195,"z":0.106918},{"x":0.876175,"y":0.655212,"z":-0.035309},{"x":0.789627,"y":0.689758,"z":-0.051910},{"x":0.788757,"y":0.728516,"z":-0.099243},{"x":0.802979,"y":0.771942,"z":-0.118576},{"x":0.694427,"y":0.682846,"z":-0.113266},{"x":0.662888,"y":0.614166,"z":-0.084824},{"x":0.658157,"y":0.702911,"z":-0.020752},{"x":0.743179,"y":0.721771,"z":-0.118851},{"x":0.873962,"y":0.656326,"z":-0.214584},{"x":0.854553,"y":0.604355,"z":-0.197479},{"x":0.788147,"y":0.615433,"z":-0.148254},{"x":0.698685,"y":0.622025,"z":-0.126007},{"x":0.766769,"y":0.755417,"z":-0.112625},{"x":0.748871,"y":0.677292,"z":-0.201660},{"x":0.719177,"y":0.644760,"z":-0.208511},{"x":0.700150,"y":0.761108,"z":-0.114944},{"x":0.724731,"y":0.816299,"z":-0.066452},{"x":0.803360,"y":0.805237,"z":-0.026688},{"x":0.817245,"y":0.769165,"z":-0.064651},{"x":0.641556,"y":0.834183,"z":-0.073837},{"x":0.496445,"y":0.868576,"z":-0.074341},{"x":0.337173,"y":1.078781,"z":0.021698},{"x":0.246338,"y":1.245087,"z":0.110077},{"x":0.281235,"y":1.347382,"z":0.068893},{"x":0.451080,"y":1.193008,"z":0.010941},{"x":0.601959,"y":0.918747,"z":0.107605},{"x":0.760651,"y":0.784760,"z":0.128433},{"x":0.823135,"y":0.664124,"z":0.148315},{"x":0.830322,"y":0.597458,"z":0.113129},{"x":0.904190,"y":0.555298,"z":0.059250},{"x":0.911499,"y":0.442459,"z":0.037415},{"x":0.920425,"y":0.386627,"z":0.009827},{"x":1.058945,"y":0.363968,"z":0.022507},{"x":1.129547,"y":0.364548,"z":0.040558},{"x":1.147049,"y":0.546341,"z":-0.005341},{"x":1.187714,"y":0.627380,"z":-0.044174},{"x":1.153458,"y":0.629150,"z":-0.013443},{"x":1.243042,"y":0.571945,"z":-0.076447},{"x":1.178268,"y":0.671417,"z":-0.046463},{"x":1.190857,"y":0.904404,"z":-0.002518},{"x":1.325119,"y":0.990295,"z":-0.037216},{"x":1.349533,"y":0.961655,"z":-0.118332},{"x":1.226318,"y":0.972549,"z":-0.094528},{"x":1.133530,"y":0.970062,"z":-0.095184},{"x":0.971802,"y":0.944839,"z":-0.065491},{"x":0.881943,"y":0.902344,"z":-0.099380},{"x":0.727921,"y":0.876190,"z":-0.126541},{"x":0.523361,"y":0.871887,"z":-0.043167},{"x":0.463272,"y":0.815323,"z":-0.014542},{"x":0.452576,"y":0.768951,"z":-0.026978},{"x":0.411850,"y":0.730438,"z":-0.002594},{"x":0.513519,"y":0.805557,"z":0.011093},{"x":0.674301,"y":0.865616,"z":0.035324},{"x":0.834686,"y":0.837799,"z":0.013260},{"x":0.967804,"y":0.730179,"z":-0.018906},{"x":1.094177,"y":0.692108,"z":0.037781},{"x":1.127625,"y":0.690552,"z":0.100830},{"x":1.132294,"y":0.633591,"z":0.049255},{"x":1.055710,"y":0.548920,"z":0.051407},{"x":1.063446,"y":0.501022,"z":0.049362},{"x":1.078659,"y":0.506088,"z":0.044785},{"x":1.124451,"y":0.541840,"z":0.026993},{"x":1.157700,"y":0.515259,"z":0.020096},{"x":1.196899,"y":0.380432,"z":-0.030502},{"x":1.065521,"y":0.368652,"z":0.036758},{"x":1.022583,"y":0.460556,"z":0.135529},{"x":1.133850,"y":0.391464,"z":0.164566},{"x":1.236862,"y":0.367813,"z":0.201096},{"x":1.297928,"y":0.388626,"z":0.173553},{"x":1.271362,"y":0.313507,"z":0.117584},{"x":1.232880,"y":0.251053,"z":0.084503},{"x":1.193314,"y":0.315689,"z":0.049927},{"x":1.205536,"y":0.502731,"z":0.025284},{"x":1.177444,"y":0.615479,"z":0.044006},{"x":1.130493,"y":0.714554,"z":0.006516},{"x":1.253387,"y":0.809647,"z":-0.008347},{"x":1.224976,"y":0.794754,"z":-0.028656},{"x":1.108505,"y":0.868164,"z":-0.081665},{"x":1.043060,"y":0.944458,"z":-0.083969},{"x":1.052902,"y":0.838699,"z":-0.074326},{"x":0.927765,"y":0.800186,"z":-0.059509},{"x":0.782135,"y":0.797272,"z":-0.054108},{"x":0.647385,"y":0.778442,"z":-0.006058},{"x":0.495605,"y":0.731522,"z":0.035110},{"x":0.499939,"y":0.765732,"z":0.102386},{"x":0.578552,"y":0.765472,"z":0.195068},{"x":0.755356,"y":0.735947,"z":0.197861},{"x":0.738403,"y":0.603760,"z":0.116196},{"x":0.741211,"y":0.502350,"z":0.041290},{"x":0.822586,"y":0.580841,"z":0.094391},{"x":0.921051,"y":0.644165,"z":0.093689},{"x":0.978943,"y":0.631607,"z":0.098007},{"x":1.005402,"y":0.574966,"z":0.108246},{"x":1.045792,"y":0.544327,"z":0.079742},{"x":1.078583,"y":0.566833,"z":0.046982},{"x":1.085403,"y":0.559998,"z":0.020691},{"x":1.086365,"y":0.496567,"z":-0.009659},{"x":1.030807,"y":0.451797,"z":0.006195},{"x":1.030228,"y":0.427979,"z":0.017334},{"x":1.078110,"y":0.427521,"z":0.044220},{"x":1.055817,"y":0.420898,"z":0.078491},{"x":0.991150,"y":0.456177,"z":0.006882},{"x":0.985779,"y":0.717270,"z":-0.012665},{"x":1.063309,"y":0.767181,"z":0.041031},{"x":1.117752,"y":0.442780,"z":0.156128},{"x":1.200409,"y":0.501053,"z":0.195038},{"x":1.489334,"y":0.532333,"z":0.136612},{"x":1.707428,"y":0.655746,"z":-0.309128},{"x":1.597839,"y":0.880142,"z":-0.391754},{"x":1.490067,"y":0.883911,"z":-0.628601},{"x":1.326797,"y":0.772568,"z":-0.559616},{"x":0.945343,"y":0.632233,"z":-0.592117},{"x":0.799881,"y":0.564011,"z":-0.652527},{"x":0.546310,"y":0.418930,"z":-0.629868},{"x":0.586197,"y":0.319321,"z":-0.435623},{"x":0.472031,"y":0.180176,"z":-0.673340},{"x":0.321426,"y":0.141922,"z":-0.588806},{"x":0.280197,"y":0.022156,"z":-0.525681},{"x":0.269302,"y":0.024994,"z":-0.669281},{"x":0.089417,"y":-0.012344,"z":-0.752609},{"x":0.194702,"y":-0.132233,"z":-0.598526},{"x":0.056091,"y":-0.158630,"z":-0.784103},{"x":0.101959,"y":-0.241241,"z":-0.916855},{"x":-0.154602,"y":-0.204956,"z":-0.855362},{"x":0.111984,"y":-0.301056,"z":-0.806671},{"x":0.141220,"y":-0.262085,"z":-1.018997},{"x":0.031357,"y":-0.275131,"z":-0.761322}]';

var data = JSON.parse(dataString),
    xData = [], yData = [], zData = [];

for (var i = 0; i < data.length; i++) { 
    xData.push({x: 500 * i, y: data[i].x});
    yData.push({x: 500 * i, y: data[i].y});
    zData.push({x: 500 * i, y: data[i].z});
}

MeteorCharts.View.DEFAULT = {
  backgroundColor: 'rgba(0,0,0,0)',
  width: 900,
  height: 450,
  padding: 10,
  spacing: 10,
  title: {
    text: {
      fill: '#ccc',
      fontSize: 0,
      visibility: "hidden"
    }
  },
  legend: {
    text: {
      fill: '#ccc',
      fontSize: 10,
    },
    spacing: 20,
  },
  xAxis: {
    min: 'auto',
    max: 'auto',
    text: {
      fill: '#ccc',
      fontSize: 10
    },
    gridLines: {
      stroke: 'rgba(0,0,0,0.2)',
      strokeWidth: 1,
    },
    formatter: 'Number' // can be Number or Date
  },
  yAxis: {
    min: 'auto',
    max: 'auto',
    text: {
      fill: '#ccc',
      fontSize: 10
    },
    gridLines: {
      stroke: 'rgba(0,0,0,0.2)',
      strokeWidth: 1,
    },
    formatter: 'Number' // can be Number or Date
  },
  series: [
    {
      stroke: '#afe225', // light green
      strokeWidth: 2,
      lineJoin: 'round'
    },
    {
      stroke: '#76d0ff', // light blue
      strokeWidth: 2,
      lineJoin: 'round'
    },
    {
      stroke: '#fc009a', // pink
      strokeWidth: 2,
      lineJoin: 'round'
    }
  ],
  tooltip: {
    title: {
      fill: '#444',
      fontSize: 10,
      fontStyle: 'italic'
    },
    content: {
      fill: 'black',
      fontSize: 10,
      fontStyle: 'bold'
    },
    rect: {
      fill: '#e8e8e8',
      lineJoin: 'round',
      strokeWidth: 4,
      padding: 8
    },
    node: {
      stroke: '#e8e8e8',
      radius: 5,
      strokeWidth: 2
    },
    connector: {
      strokeWidth: 4,
      opacity: 0.4,
      points: [0, 0, 0, 0],
      dashArray: [10, 8]
    }
  },  
  zoom: {
    type: 'box', // can be box or range
    selection: {
      fill: 'white',
      opacity: 0.3
    }
  }
};

var model = {
  title: "video graph",
  series: [{
    title: "X-data",
    points: xData
  }, {
    title: "Y-data",
    points: yData
  }, {
    title: "Z-data",
    points: zData
  }]
};

var view = {
  width: window.screen.width,
  height: 250
};

var lineChart = new MeteorCharts.Line({
  container: 'container',
  model: model,
  view: view
});

// :::::::::: video player controls ::::::::::::::::

$(function () {

  var videoTag = $(".footage-player"),
      videoPlayer = videoTag.get(0),
      slider = $("#slider");

  var isDragging = false;
  var startX;

  videoPlayer.playbackRate = 0.5;

  videoTag.on("mousedown", function (e) {
    // console.log("mousedown %s", isDragging);
    isDragging = true;
    startX = e.clientX;
  });

  videoTag.on("mouseup", function (e) {
    // console.log("mouseup %s", isDragging);
    isDragging = false;
  });

  videoTag.on("mousemove", function(e) {
    // console.log("mousemove %s", isDragging);
    if (isDragging) {
      if (videoPlayer.currentTime < videoPlayer.duration) {
        videoPlayer.currentTime += (e.clientX - startX)/window.screen.width;
        slider.css({left: (videoPlayer.currentTime/videoPlayer.duration)*window.screen.width + 25});
      } else {
        videoPlayer.currentTime = 0;
      }
    }
  });

  var videoTimer;

  function updateSlider() {
    slider.css({left: (videoPlayer.currentTime/videoPlayer.duration)*window.screen.width + 25});
  }

  videoPlayer.onplaying = function () {
    // console.log("playing");
    videoPlayer.currentTime = 0;
    videoTimer = window.setInterval(updateSlider, 33.333);
  };

  videoPlayer.onpause = function () {
    // console.log("paused");
    window.clearInterval(videoTimer);
  };

});

